/* ================================================
   FORM (оптимизация без поломки API)
   Классы те же, поведение то же
   ================================================ */

/* 1) убираем дубли .form__error и делаем один источник правды */
.form__error {
    display: none;
    font-size: var(--fs-sm);
    color: var(--color-error);
    margin-top: var(--spacing-xs);
}

/* 2) не подсвечиваем invalid, пока поле пустое (меньше “красноты” при открытии форм)
   Если у input нет placeholder — правило просто не сработает, ничего не ломаем */
.form__input:invalid {
    box-shadow: none;
}

.form__input:not(:placeholder-shown):invalid {
    border-color: var(--color-error);
    box-shadow: 0 0 0 6px rgba(225, 29, 72, 0.08);
}

.form__input:not(:placeholder-shown):invalid+.form__error {
    display: block;
}

/* 3) фокус: оставляем текущий, но добавляем focus-visible (не ломает мышь/тач) */
.form__input:focus,
.form__select:focus,
.form__textarea:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 6px rgba(255, 208, 0, 0.12);
    outline: none;
}

.form__input:focus-visible,
.form__select:focus-visible,
.form__textarea:focus-visible {
    outline: 3px solid rgba(255, 255, 255, 0.85);
    outline-offset: 3px;
}

/* 4) transition: убираем transform (он тут не используется), оставляем только нужное */
.form__input,
.form__select,
.form__textarea {
    transition: border-color var(--transition-fast),
        box-shadow var(--transition-fast),
        background-color var(--transition-fast),
        color var(--transition-fast);
    box-shadow: none;
    outline: none;
}

/* 5) консистентная “тактильная” высота (если уже задано где-то — переопределится по каскаду) */
.form__input,
.form__select {
    height: 56px;
}

/* 6) радио не глобально (чтобы не переехать в других местах сайта) */
.form input[type="radio"] {
    width: 20px;
    height: 20px;
    accent-color: var(--color-primary);
}

/* 7) reduced motion: оставляем как было, но теперь точно отключает всё */
@media (prefers-reduced-motion: reduce) {

    .form__input,
    .form__select,
    .form__textarea {
        transition: none;
    }
}